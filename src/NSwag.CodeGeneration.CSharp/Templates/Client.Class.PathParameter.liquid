{% if parameter.IsDateTimeArray -%}
{
    var i = 0;
    foreach (var item in {{ parameter.VariableName }})
    {
        urlBuilder_.Append(System.Uri.EscapeDataString(item.ToString("{{ ParameterDateTimeFormat }}", System.Globalization.CultureInfo.InvariantCulture)));
        urlBuilder_.Append(',');
        i++;
    }
    if (i > 0)
    {
        urlBuilder_.Length--;
    }
}
{% elsif parameter.IsDateArray -%}
{
    var i = 0;
    foreach (var item in {{ parameter.VariableName }})
    {
        urlBuilder_.Append(System.Uri.EscapeDataString(item.ToString("{{ ParameterDateFormat }}", System.Globalization.CultureInfo.InvariantCulture)));
        urlBuilder_.Append(',');
        i++;
    }
    if (i > 0)
    {
        urlBuilder_.Length--;
    }
}
{% elsif parameter.IsDateTime -%}
urlBuilder_.Append(System.Uri.EscapeDataString({{ parameter.VariableName }}.ToString("{{ ParameterDateTimeFormat }}", System.Globalization.CultureInfo.InvariantCulture)));
{% elsif parameter.IsDate -%}
urlBuilder_.Append(System.Uri.EscapeDataString({{ parameter.VariableName }}.ToString("{{ ParameterDateFormat }}", System.Globalization.CultureInfo.InvariantCulture)));
{% elsif parameter.IsArray -%}
{
    var i = 0;
    foreach (var item in {{ parameter.VariableName }})
    {
        urlBuilder_.Append(System.Uri.EscapeDataString(item, System.Globalization.CultureInfo.InvariantCulture));
        urlBuilder_.Append(',');
        i++;
    }
    if (i > 0)
    {
        urlBuilder_.Length--;
    }
}
{% else -%}
urlBuilder_.Append(System.Uri.EscapeDataString(ConvertToString({{ parameter.VariableName }}, System.Globalization.CultureInfo.InvariantCulture)));
{%- endif %}