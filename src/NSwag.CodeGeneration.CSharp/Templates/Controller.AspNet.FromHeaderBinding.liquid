public class FromHeaderBinding : {{ GlobalSystemNamespaceAlias }}.Web.Http.Controllers.HttpParameterBinding
{
    private readonly string _name;

    public FromHeaderBinding({{ GlobalSystemNamespaceAlias }}.Web.Http.Controllers.HttpParameterDescriptor parameter, string headerName)
        : base(parameter)
    {
        if (string.IsNullOrEmpty(headerName)) throw new {{ GlobalSystemNamespaceAlias }}.ArgumentNullException("headerName");
        _name = headerName;
    }

    public override {{ GlobalSystemNamespaceAlias }}.Threading.Tasks.Task ExecuteBindingAsync({{ GlobalSystemNamespaceAlias }}.Web.Http.Metadata.ModelMetadataProvider metadataProvider, {{ GlobalSystemNamespaceAlias }}.Web.Http.Controllers.HttpActionContext actionContext, {{ GlobalSystemNamespaceAlias }}.Threading.CancellationToken cancellationToken)
    {
        {{ GlobalSystemNamespaceAlias }}.Collections.Generic.IEnumerable<string> values;
        var isBound = false;
        if (actionContext.Request.Headers.TryGetValues(_name, out values))
        {
            string tempVal = null;
            foreach (var value in values)
            {
                if (value != null)
                {
                    tempVal = value;
                    break;
                }
            }
            if (tempVal != null)
            {
                var actionValue = {{ GlobalSystemNamespaceAlias }}.Convert.ChangeType(tempVal, Descriptor.ParameterType);
                actionContext.ActionArguments[Descriptor.ParameterName] = actionValue;
                isBound = true;
            }
        }
        if (!isBound && Descriptor.IsOptional)
        {
            actionContext.ActionArguments[Descriptor.ParameterName] = Descriptor.DefaultValue;
        }
        var taskSource = new {{ GlobalSystemNamespaceAlias }}.Threading.Tasks.TaskCompletionSource<object>();
        taskSource.SetResult(null);
        return taskSource.Task;
    }
}